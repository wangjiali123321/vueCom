!function(u){"use strict";var T="ht",A=u[T],d=A.Default,x=Math,R=(x.PI,x.sin,x.cos,x.atan2,x.sqrt,x.max),q=x.floor,j=(x.round,x.ceil),B=A.Shape,o=(A.Edge,A.List),p=A.Style,k=A.graph,s=d.getInternal(),D=s.ui(),c=null,G="prototype",Y=u.clearInterval,m=u.setInterval,K=function(f){var D=f.data,k=this.dm();if(D&&"add"===f.kind){var M=k.$1c,w=D instanceof B?"shape.":"edge.";M&&D.s(w+"dash.flow")&&M.indexOf(D)<0&&M.push(D)}"clear"===f.kind&&(k.$1c=[])},X=function(V){var S=V.property,t=V.data,r=V.newValue,T=this.dm().$1c,J=t instanceof B?"s:shape.dash.flow":"s:edge.dash.flow";if(T&&S===J)if(r)T.indexOf(t)<0&&T.push(t);else for(var y=T.length,Q=0;y>Q;Q++)if(T[Q]===t){T.splice(Q,1);break}},S=k.GraphView[G],_=D.EdgeUI[G],b=D.ShapeUI[G],h=b._80o,U=_._80o,M=A.DataModel[G],$=M.prepareRemove,g=S.setDataModel;p["edge.dash.flow.step"]==c&&(p["edge.dash.flow.step"]=3),p["shape.dash.flow.step"]==c&&(p["shape.dash.flow.step"]=3),M.prepareRemove=function(Y){$.call(this,Y);var e=Y._dataModel,C=e.$1c;if(C)for(var I=C.length,J=0;I>J;J++)if(C[J]===Y){C.splice(J,1);break}},S.setDataModel=function(e){var m=this,H=m._dataModel;if(H!==e){H&&(H.umm(K,m),H.umd(X,m),H.$1c=[]),e.mm(K,m),e.md(X,m);var G=e.$1c=[];e.each(function(e){var v=e instanceof B?"shape.":"edge.";e.s(v+"dash.flow")&&G.indexOf(e)<0&&G.push(e)}),g.call(m,e)}},S.setDashFlowInterval=function(A){var w=this,S=w.$2c;w.$2c=A,w.fp("dashFlowInterval",S,A),w.$3c!=c&&(Y(w.$3c),delete w.$3c,w.enableDashFlow(A))},S.getDashFlowInterval=function(){return this.$2c},S.$4c=function(){var N,O,t,c=this,l=c.tx(),Z=c.ty(),p=c._zoom,X=c.getWidth(),$=c.getHeight(),S={x:-l/p,y:-Z/p,width:X/p,height:$/p},K=c.dm().$1c,e=c._56I,I=new o;if(K.forEach(function(f){e[f.getId()]&&(N=c.getDataUI(f),N&&(t=N._79o(),t&&I.add(t)))}),0!==I.size()&&(I.each(function(N){d.intersectsRect(S,N)&&(O=d.unionRect(O,N))}),O&&(O&&(d.grow(O,R(1,1/p)),O.x=q(O.x*p)/p,O.y=q(O.y*p)/p,O.width=j(O.width*p)/p,O.height=j(O.height*p)/p,O=d.intersection(S,O)),O))){var M=c._canvas.getContext("2d");M.save(),M.lineCap=d.lineCap,M.lineJoin=d.lineJoin;var i=d.devicePixelRatio,u=O.x,y=O.y,v=O.width,H=O.height;u=Math.floor((u*p+l)*i),y=Math.floor((y*p+Z)*i),v=Math.ceil(v*p*i)+1,H=Math.ceil(H*p*i)+1,O.x=(u/i-l)/p,O.y=(y/i-Z)/p,O.width=v/i/p,O.height=H/i/p,M.beginPath(),M.rect(u,y,v,H),M.clip(),M.clearRect(u,y,v,H),s.translateAndScale(M,l,Z,p),c.$5c(M,O),M.restore()}},S.$5c=function(s,g){var u,j,X=this;X._93db(s),X.each(function(f){X._56I[f._id]&&(u=X.getDataUI(f),u&&(j=u._79o(),(!g||d.intersectsRect(g,j))&&(u.$7c=!0,u._42(s),delete u.$7c)))}),X._92db(s)},S.enableDashFlow=function(f){var F=this;F.$3c==c&&(F.$3c=m(function(){F.$4c()},f||F.$2c||50))},S.disableDashFlow=function(){var k=this;Y(k.$3c),delete k.$3c};var e=function(){var U=this,v=U._data,V=v instanceof B?"shape.":"edge.",c=v.s(V+"dash.pattern"),R=v.s(V+"dash.flow.reverse");if(c&&v.s(V+"dash")&&v.s(V+"dash.flow")&&U.$7c){var a=U.s(V+"dash.offset")||0,X=v.s(V+"dash.flow.step"),o=v.getStyleMap(),l=0;c.forEach(function(p){l+=p}),R&&(X=-X),a-=X,a%=l,o||(v._styleMap=o={}),o[V+"dash.offset"]=a}};_._80o=function(S){U.call(this,S),e.call(this)},b._80o=function(W){h.call(this,W),e.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
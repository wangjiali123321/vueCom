!function(E){"use strict";function C(M){var O,r,y,D,Y,v,f,x=[],J=0;O=d.createDiv(),O.style.overflow="hidden";var L=M.getView();L.insertBefore(O,M.getCanvas()),r=u.Default.createDiv(),r.style.WebkitTransformStyle="preserve-3d",r.style.MozTransformStyle="preserve-3d",r.style.transformStyle="preserve-3d",O.appendChild(r),[{event:"mousedown",style:"none"},{event:"mouseup",style:"auto"},{event:"touchstart",style:"none"},{event:"touchend",style:"auto"}].forEach(function(K){var Q=K.style;e.addEventListener(L,K.event,function(){O.style.pointerEvents=Q})}),this.updateWebView=function(){if(M.getWidth()&&M.getHeight()){var o=M.getCanvas(),F=1*o.style.width.slice(0,-2),X=1*o.style.height.slice(0,-2);(x[0]!==F||x[1]!==X)&&(x[0]=F,x[1]=X,O.style.width=F+"px",O.style.height=X+"px",r.style.width=F+"px",r.style.height=X+"px");var g=M._projectMatrix[5]*x[1]/2;g!==y&&(y=g,O.style.WebkitPerspective=y+"px",O.style.MozPerspective=y+"px",O.style.perspective=y+"px"),v="translateZ("+y+"px)"+t(M._viewMatrix);var l=v+"translate("+x[0]/2+"px,"+x[1]/2+"px)";D===l||Y||(r.style.WebkitTransform=l,r.style.MozTransform=l,r.style.transform=l,D=l),J++,f=!1,M.dm().each(function(M){M.isWebView&&V(M)});for(var s,L=r.children,G=[],C=0,b=L.length;b>C;C++)s=L[C],s._isHtWebView&&s._renderCookie!==J&&G.push(s);G.length&&G.forEach(function(J){r.removeChild(J)})}};var Q=new Array(16),V=function(l){var K=l.getAttach();if(K){K.parentElement!==r&&r.appendChild(K),K._renderCookie=J,f=!0;var e=l.getFinalScale3d(),A=l._prefrenceSize;A&&A[0]?A[1]||(A[1]=A[0]/e[0]*e[1]):A=[e[0],e[1]],K.style.width=A[0]+"px",K.style.height=A[1]+"px";var H=1/A[0],h=1/A[1],$=1,S=l.mat;Q[0]=S[0]*H,Q[1]=S[1]*H,Q[2]=S[2]*H,Q[3]=S[3]*H,Q[4]=S[4]*h,Q[5]=S[5]*h,Q[6]=S[6]*h,Q[7]=S[7]*h,Q[8]=S[8]*$,Q[9]=S[9]*$,Q[10]=S[10]*$,Q[11]=S[11]*$,Q[12]=S[12],Q[13]=S[13],Q[14]=S[14],Q[15]=S[15];var q=B(Q,Y?"translate("+x[0]/2+"px,"+x[1]/2+"px)"+v:""),u=K.$a2;u!==q&&(K.$a2=q,K.style.WebkitTransform=q,K.style.MozTransform=q,K.style.transform=q)}}}function a(S){return Math.abs(S)<1e-10?0:S}function t(H){var u=H;return"matrix3d("+a(u[0])+","+a(-u[1])+","+a(u[2])+","+a(u[3])+","+a(u[4])+","+a(-u[5])+","+a(u[6])+","+a(u[7])+","+a(u[8])+","+a(-u[9])+","+a(u[10])+","+a(u[11])+","+a(u[12])+","+a(-u[13])+","+a(u[14])+","+a(u[15])+")"}function B(s,P){var w=s,Z="matrix3d("+a(w[0])+","+a(w[1])+","+a(w[2])+","+a(w[3])+","+a(-w[4])+","+a(-w[5])+","+a(-w[6])+","+a(-w[7])+","+a(w[8])+","+a(w[9])+","+a(w[10])+","+a(w[11])+","+a(w[12])+","+a(w[13])+","+a(w[14])+","+a(w[15])+")";return"translate(-50%,-50%)"+(P||"")+Z}var v="ht",u=E[v],d=u.Default,e=d.getInternal(),$=e.superCall,I=u.graph3d.Graph3dView,T=I.prototype.validateImpl;I.prototype.validateImpl=function(){T.call(this);var N=this._webViewRenderer;N||(N=this._webViewRenderer=new C(this)),N.updateWebView()};var g=u.WebView3d=function(){var f=this;$(g,f),f.s({shape3d:"billboard","shape3d.reverse.flip":!0})},V=[1,1,1,1],W=[0,0,0,0];d.def(v+"."+"WebView3d",u.Node,{ms_ac:["attach"],isWebView:!0,attachDOM:function(w,s,F){if(!w)return this.detachDOM();if("string"==typeof w){var g=document.createElement("iframe");g.src=w,w=g}var Z=w.style;Z.position="absolute",Z.border=0,Z.outline=0,Z.padding=0,Z.margin=0,w._isHtWebView=!0,this.setAttach(w),this._prefrenceSize=[s,F],this.s("shape3d.blend",W)},detachDOM:function(){this.setAttach(null),this.s("shape3d.blend",this.getBgColor())},setBgColor:function(l){this.a("defaultBgColor",l),this.getAttach()||this.s("shape3d.blend",l)},getBgColor:function(){return this.a("defaultBgColor")||V}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
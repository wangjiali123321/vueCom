!function(l,$){"use strict";var D="ht",A=D+".graph.",Z=l[D],j=Z.graph,R=Z.Default,N=Z.Color,g=null,V="px",f=R.getInternal(),n=f.getPinchDist,x=R.preventDefault,P=R.getTouchCount,o=R.startDragging;f.addMethod(R,{overviewBackground:N.widgetBackground,overviewMaskBackground:N.transparent,overviewContentBorderColor:N.widgetBorder,overviewContentBackground:N.background},!0),j.Overview=function(B){var d=this,r=d._view=f.createView(1,d);d._canvas=f.createCanvas(r),r.style.background=R.overviewBackground,r.appendChild(d._mask=f.createDiv()),d.setGraphView(B),d.addListeners()},R.def(A+"Overview",$,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:R.overviewMaskBackground,_contentBorderColor:R.overviewContentBorderColor,_contentBackground:R.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(K){var T=this;if(T.gv!==K){var J=T.gv;T.gv=K,J&&(J.removeViewListener(T.handleGraphViewChanged,T),J.ump(T.handleGraphViewPropertyChanged,T)),K&&(K.addViewListener(T.handleGraphViewChanged,T),K.mp(T.handleGraphViewPropertyChanged,T)),T.fp("graphView",J,K),T.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(R){this._autoUpdate&&"validate"===R.kind&&this.redraw()},handleGraphViewPropertyChanged:function(z){("canvasBackground"===z.property||this.getFixToRect()&&("zoom"===z.property||"translateX"===z.property||"translateY"===z.property))&&this.redraw()},redraw:function(){var h=this;h._redraw||(h._redraw=1,h.iv(50))},validateImpl:function(){var i=this,D=i.gv,C=i._canvas,Z=i.getWidth(),j=i.getHeight(),Q=i._redraw;if(D){var Y=i._mask,d=Y.style,P=D.getViewRect(),$=this.getFixToRect(),E=$?"boolean"==typeof $?D.getContentRect():$:D.getScrollRect(),K=E.x,e=E.y,U=E.width,A=E.height,b=i._rate=Math.max(U/Z,A/j),T=i._x=(Z-U/b)/2,s=i._y=(j-A/b)/2;if(0!==P.width&&0!==P.height||i.hasRetry||(R.callLater(i.iv,i,g),i.hasRetry=!0),(Z!==C.clientWidth||j!==C.clientHeight)&&(f.setCanvas(C,Z,j),Q=1),f.isSameRect(E,i._scrollRect)||(i._scrollRect=E,Q=1),Q){var B=f.initContext(C),N=D.getDataModel(),J=N.getBackground()||i._contentBackground,I=i._contentBorderColor,m=R.devicePixelRatio;B.clearRect(0,0,Z*m,j*m);var r=N.getBackground()&&N.a("width")>0&&N.a("height")>0;J&&!r&&f.fillRect(B,T*m,s*m,U/b*m,A/b*m,J),f.translateAndScale(B,-K/b+T,-e/b+s,1/b),D._42(B),B.restore(),I&&f.drawBorder(B,I,T*m,s*m,U/b*m,A/b*m)}d.background=i._maskBackground,d.left=T+(P.x-K)/b+V,d.top=s+(P.y-e)/b+V,d.width=P.width/b+V,d.height=P.height/b+V,i._redraw=null}else if(Q){var B=f.initContext(C);B.clearRect(0,0,Z,j),B.restore(),i._redraw=null}},center:function(y){var w=this,q=w.gv;if(q){var P=q._zoom,$=q._29I,K=w._rate,h=w._scrollRect,W=R.getLogicalPoint(y,w._canvas),A=h.x+(W.x-w._x)*K,E=h.y+(W.y-w._y)*K;q.setTranslate(($.width/2-A)*P,($.height/2-E)*P)}},handle_mousedown:function(h){this.handle_touchstart(h)},handleWindowMouseUp:function(A){this.handleWindowTouchEnd(A)},handleWindowMouseMove:function($){this.handleWindowTouchMove($)},handle_mousewheel:function(z){this.handleScroll(z,z.wheelDelta)},handle_DOMMouseScroll:function(K){2===K.axis&&this.handleScroll(K,-K.detail)},handleScroll:function(L,l){if(x(L),this.gv){var O=this.gv;l>0?O.scrollZoomIn():0>l&&O.scrollZoomOut()}},handle_touchstart:function(l){if(x(l),this.gv&&R.isLeftButton(l)){var j=this,O=j.gv,i=P(l);1===i?R.isDoubleClick(l)&&O.isResettable()?O.reset():(j.center(l),o(j,l)):2===i&&(j._dist=n(l),o(j,l))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(q){if(this.gv){var Z=this,F=Z._dist,s=P(q);1===s?Z.center(q):2===s&&F!=g&&Z.gv.handlePinch(g,n(q),F)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
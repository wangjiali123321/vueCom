!function(l,N){"use strict";var q="ht",u=l[q],Z="innerHTML",L="className",s=null,j="px",W=u.Default,B=W.getInternal(),M="0",P=function(){return document},m=function(Q){return P().createElement(Q)},U=function(){return m("canvas")},i=function(F,r,B){F.style.setProperty(r,B,s)},$=function(b,S,g){W.def(u.widget[b],S,g)},o=function(Q,t){Q.appendChild(t)},E=function(J,H){J.removeChild(H)},k=B.addEventListener,_=B.removeEventListener,x=W.isTouchable;B.addMethod(W,{menuLabelFont:(x?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),u.widget.Menu=function(Q){var F=this,r=F._view=B.createView(null,F),b=F.$1g=new u.widget.ContextMenu,V=m("ul");b._r=!0,b._view[L]+=" ht-widget-dropdownmenu",r[L]="ht-widget-menu",V[L]="header",i(r,"margin",M),i(r,"padding",M),i(r,"background",W.menuBackground),i(r,"-webkit-user-select","none"),i(r,"-moz-user-select","none"),i(r,"user-select","none"),i(r,"text-align","left"),i(r,"border-bottom",W.menuSeparatorWidth+"px solid "+W.menuSeparatorColor),i(r,"cursor","default"),i(r,"overflow","auto"),i(r,"white-space","nowrap"),i(r,"font",W.menuLabelFont),i(r,"color",W.menuLabelColor),i(r,"box-sizing","border-box"),i(r,"-moz-box-sizing","border-box"),i(V,"list-style","none"),i(V,"margin",M),i(V,"padding",M),i(V,"display","inline-block"),o(r,V),F.setItems(Q),F.$2g=function(v){F.$3g(v)},F.$4g=function(R){F.$5g(R)},F.$6g=function(s){F.$7g(s)},F.$8g=function(C){F.$9g(C)},F.$9b=function(u){F.$10g(u)},F._autoShow=!0,F.setAutoShow(!1),b.afterHide=function(){F.$11g()},b.afterShow=function(){F.$12g()},_(P(),"keydown",b.$3b),F.$3b=function(Z){F.$13g(Z)},F.invalidate()},$("Menu",N,{_items:s,$14g:W.menuHoverBackground,$15g:W.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(l){var y=this;if(y.$21g=l,y.setItems(y._items),"largeicons"===l){for(var E=y._view.querySelectorAll(".header-item"),O=0,R=0;R<E.length;R++){var q=E[R];O=Math.max(O,q.clientWidth)}for(var R=0;R<E.length;R++){var q=E[R];i(q,"min-width",O+j)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(F){this.$22g=F;for(var L=this._view.querySelectorAll(".header-item"),g=0;g<L.length;g++){var x=L[g];i(x,"margin-left",F+j),i(x,"margin-right",F+j)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(b){this.$23g=b;for(var F=this._view.querySelectorAll(".header-item"),J=0;J<F.length;J++){var H=F[J];i(H,"margin-top",b+j),i(H,"margin-bottom",b+j)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(O){this.$24g=O,i(this._view,"text-align",O)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var q=this,D=q._enableGlobalKey;D===!1&&(k(P(),"keydown",q.$3b),q._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,_(P(),"keydown",this.$3b)},setHoverBackground:function(Q){this.$14g=Q},setHoverColor:function(O){this.$15g=O},setItems:function(t){var v=this,x=v._view,g=v.$21g;if(v._items=t,x.children[0][Z]="",v.$16g={},t&&t.length){for(var N=x.children[0],y=0,l=P().createDocumentFragment();y<t.length;y++){var d=t[y],_=m("li"),R=m("span");if(d.icon){var I=U();I[L]="menu-item-icon","smallicons"===g?(i(I,"height","1.2em"),i(I,"width","1.2em"),i(I,"vertical-align","middle")):(i(I,"height","32px"),i(I,"width","32px"),i(I,"display","block"),i(I,"margin","0 auto")),I.$20g=d.icon,o(_,I)}_[L]="header-item",i(_,"display","inline-block"),i(_,"vertical-align","top"),i(_,"padding","0 1.2em"),i(_,"line-height","1.8em"),"largeicons"===g&&i(_,"text-align","center"),i(_,"background-color","rgba(0,0,0,0)"),_.setAttribute("data-index",y),v.$16g[y]=d.items,R[Z]=d.label,"iconsonly"!==g&&o(_,R),o(l,_)}o(N,l)}},showDropdownMenu:function(L){var g=this,x=g.$16g[L],G=g.$1g,P=g._view.children[0].children[L],Z=g.$17g;if(P&&P!==Z){Z&&g.hideDropdownMenu();var X=P.getBoundingClientRect(),n=W.getWindowInfo();g.$17g=P,G.setItems(x),G.show(X.left+n.left,X.top+X.height+n.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(r,D){var t=this,F=t._items;return F&&0!==F.length?t.$1g.getItemByProperty(r,D,F):s},$12g:function(){var X=this,B=X.$17g;B.style.background=X.$14g,B.style.color=X.$15g,X._autoShow||k(P(),x?"touchstart":"mousedown",X.$9b)},$11g:function(){var o=this,N=o.$17g;N&&(N.style.background="",N.style.color="",o.$17g=s),_(P(),x?"touchstart":"mousedown",o.$9b)},$10g:function(l){var X=this,M=X._view,S=X.$1g,y=M.children[0];!P().body.contains(M)||y.contains(l.target)||S._view.contains(l.target)||X.hideDropdownMenu()},$13g:function(t){var V=this,C=V.$1g;P().body.contains(V._view)&&C.$13b.$4b.call(C.$13b,t,V._items)},setAutoShow:function(B){var Q=this,y=Q.$1g,b=Q._view;Q._autoShow!==B&&(Q._autoShow?(_(b,"mouseover",Q.$2g),_(b,"mouseout",Q.$4g),_(y._view,"mouseout",Q.$4g),x||(k(b,"mouseover",Q.$8g),k(b,"mouseout",Q.$8g)),k(b,x?"touchstart":"mousedown",Q.$6g)):(_(b,"mouseover",Q.$8g),_(b,"mouseout",Q.$8g),_(b,x?"touchstart":"mousedown",Q.$6g),_(P(),x?"touchstart":"mousedown",Q.$9b),x||(k(b,"mouseover",Q.$2g),k(b,"mouseout",Q.$4g),k(y._view,"mouseout",Q.$4g))),Q._autoShow=B)},$3g:function(P){var w=this,x=w._view.children[0],j=P.target;if(x!==j&&x.contains(j)){for(;"header-item"!==j[L];)j=j.parentNode;w.showDropdownMenu(j.getAttribute("data-index"))}},$5g:function(G){var d=this,z=d._view.children[0],O=d.$1g,W=G.target,q=G.relatedTarget;!z.contains(W)&&!O._view.contains(W)||z.contains(q)||O._view.contains(q)||d.hideDropdownMenu()},$7g:function(U){U.preventDefault();var i=this,V=i._view.children[0],M=i.$1g,e=U.target;if(W.isLeftButton(U)&&V!==e&&V.contains(e))if(x){for(;"header-item"!==e[L];)e=e.parentNode;var Z=e.getAttribute("data-index"),M=i.$1g,w=i._view.children[0].children[Z],$=i.$17g;M.isShowing()&&i.hideDropdownMenu(),w!==$&&i.showDropdownMenu(Z)}else if(M.isShowing())i.hideDropdownMenu();else{for(;"header-item"!==e[L];)e=e.parentNode;i.showDropdownMenu(e.getAttribute("data-index"))}},$9g:function(B){var G=this,L=G._view,_=G.$1g,f=B.target;if(L.contains(f)){for(var I=L.querySelectorAll(".header-item"),D=s,c=0;c<I.length;c++){var T=I[c];T.style.background="",T.style.color="","mouseover"===B.type?T.contains(f)&&(D=T):"mouseout"===B.type&&_.isShowing()&&G.$17g===T&&(D=T)}_.isShowing()&&(D||(D=G.$17g),G.showDropdownMenu(D.getAttribute("data-index"))),D&&(D.style.background=G.$14g,D.style.color=G.$15g)}},getShowingMenuIndex:function(){var i=this.$17g;return i?i.getAttribute("data-index"):-1},addTo:function(l){var f=this,N=f._view;o(l,N),f.invalidate()},dispose:function(){var R=this,b=R._view,k=R.$1g;b&&(R._autoShow?(_(b,"mouseover",R.$2g),_(b,"mouseout",R.$4g),_(k._view,"mouseout",R.$4g)):(_(b,"mouseover",R.$8g),_(b,"mouseout",R.$8g),_(b,x?"touchstart":"mousedown",R.$6g),_(P(),x?"touchstart":"mousedown",R.$9b)),_(P(),"keydown",R.$3b),k.dispose(),b.parentNode&&E(b.parentNode,b),R._view=R.$1g=R.$16g=R._items=R.$17g=R.$2g=R.$4g=R.$6g=R.$8g=R.$9b=R.$3b=s)},$19g:function(P,i,S,Z){var h=B.initContext(P);B.translateAndScale(h,0,0,1),h.clearRect(0,0,S,Z),W.drawStretchImage(h,W.getImage(i),"fill",0,0,S,Z),h.restore()},validateImpl:function(){var Q,z,Y,D=this,v=D._view,n=v.querySelectorAll(".menu-item-icon");for(Y=0;Y<n.length;Y++){var c=n[Y];Q=c.clientWidth,z=c.clientHeight,Q&&z&&(B.setCanvas(c,Q,z),D.$19g(c,W.getImage(c.$20g),Q,z))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);